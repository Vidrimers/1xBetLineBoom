// Ð¡ÐºÑ€Ð¸Ð¿Ñ‚ Ð´Ð»Ñ Ð¸ÑÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ñ chat_id Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÐµÐ¹, Ñƒ ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ñ… Ð·Ð°Ð¿Ð¸ÑÐ°Ð½ ID Ð³Ñ€ÑƒÐ¿Ð¿Ñ‹ Ð²Ð¼ÐµÑÑ‚Ð¾ Ð»Ð¸Ñ‡Ð½Ð¾Ð³Ð¾ ID
// ÐÑƒÐ¶Ð½Ð¾ Ð·Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚ÑŒ ÑÑ‚Ð¾Ñ‚ ÑÐºÑ€Ð¸Ð¿Ñ‚ Ð¸ Ð¿Ð¾Ð¿Ñ€Ð¾ÑÐ¸Ñ‚ÑŒ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÐµÐ¹ Ð½Ð°Ð¿Ð¸ÑÐ°Ñ‚ÑŒ Ð±Ð¾Ñ‚Ñƒ /start Ð² Ð»Ð¸Ñ‡ÐºÑƒ

import Database from "better-sqlite3";

const db = new Database("1xBetLineBoom.db");

console.log("ðŸ” ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÐµÐ¹ Ñ Ð½ÐµÐ¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ñ‹Ð¼ chat_id...\n");

// ÐŸÐ¾Ð»ÑƒÑ‡Ð°ÐµÐ¼ Ð²ÑÐµÑ… Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÐµÐ¹
const users = db.prepare("SELECT * FROM telegram_users").all();

console.log(`Ð’ÑÐµÐ³Ð¾ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÐµÐ¹ Ð² Ð±Ð°Ð·Ðµ: ${users.length}\n`);

// ID Ð³Ñ€ÑƒÐ¿Ð¿Ñ‹ (Ð¾Ñ‚Ñ€Ð¸Ñ†Ð°Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ð¹)
const GROUP_CHAT_ID = -1003639638830;

// ÐÐ°Ñ…Ð¾Ð´Ð¸Ð¼ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÐµÐ¹ Ñ chat_id Ð³Ñ€ÑƒÐ¿Ð¿Ñ‹
const usersWithGroupId = users.filter(u => u.chat_id === GROUP_CHAT_ID);

if (usersWithGroupId.length > 0) {
  console.log(`âŒ ÐÐ°Ð¹Ð´ÐµÐ½Ð¾ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÐµÐ¹ Ñ Ð½ÐµÐ¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ñ‹Ð¼ chat_id (ID Ð³Ñ€ÑƒÐ¿Ð¿Ñ‹): ${usersWithGroupId.length}`);
  console.log("\nÐ¡Ð¿Ð¸ÑÐ¾Ðº Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÐµÐ¹:");
  usersWithGroupId.forEach(u => {
    console.log(`  - @${u.telegram_username} (${u.first_name || 'Ð±ÐµÐ· Ð¸Ð¼ÐµÐ½Ð¸'})`);
  });
  
  console.log("\nâš ï¸ Ð Ð•Ð¨Ð•ÐÐ˜Ð•:");
  console.log("ÐŸÐ¾Ð¿Ñ€Ð¾ÑÐ¸Ñ‚Ðµ ÑÑ‚Ð¸Ñ… Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÐµÐ¹ Ð½Ð°Ð¿Ð¸ÑÐ°Ñ‚ÑŒ Ð±Ð¾Ñ‚Ñƒ /start Ð² Ð›Ð˜Ð§ÐÐ«Ð• Ð¡ÐžÐžÐ‘Ð©Ð•ÐÐ˜Ð¯ (Ð½Ðµ Ð² Ð³Ñ€ÑƒÐ¿Ð¿Ðµ)");
  console.log("ÐŸÐ¾ÑÐ»Ðµ ÑÑ‚Ð¾Ð³Ð¾ Ð¸Ñ… chat_id Ð¾Ð±Ð½Ð¾Ð²Ð¸Ñ‚ÑÑ Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸ Ð½Ð° Ð¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ñ‹Ð¹ Ð»Ð¸Ñ‡Ð½Ñ‹Ð¹ ID");
} else {
  console.log("âœ… Ð’ÑÐµ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ð¸ Ð¸Ð¼ÐµÑŽÑ‚ Ð¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ñ‹Ð¹ chat_id");
}

// ÐŸÐ¾ÐºÐ°Ð·Ñ‹Ð²Ð°ÐµÐ¼ Ð²ÑÐµÑ… Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÐµÐ¹ Ð´Ð»Ñ ÑÐ¿Ñ€Ð°Ð²ÐºÐ¸
console.log("\nðŸ“‹ Ð’ÑÐµ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ð¸:");
users.forEach(u => {
  const isGroup = u.chat_id < 0;
  const status = isGroup ? "âŒ ID Ð³Ñ€ÑƒÐ¿Ð¿Ñ‹" : "âœ… Ð›Ð¸Ñ‡Ð½Ñ‹Ð¹ ID";
  console.log(`  ${status} - @${u.telegram_username}: ${u.chat_id} (${u.first_name || 'Ð±ÐµÐ· Ð¸Ð¼ÐµÐ½Ð¸'})`);
});

db.close();
